"""Run some test instances."""

from solver import solve_parity_game

# List of test instances, each being of the form
# (edges, start node, Eloise's nodes, omega, win)
# where win is True if Eloise should win the game.
INSTANCES = [
    ({(1, 2), (2, 1), (1, 1), (2, 2)}, 1, {1}, {1: 0, 2: 1}, True),
    ({(1, 2), (1, 3), (2, 3), (3, 1), (3, 2)},
     1, {1}, {1: 0, 2: 1, 3: 1}, False),
    ({(1, 2), (7, 1), (3, 4), (8, 1), (5, 7), (2, 3), (6, 7),
      (4, 5), (5, 6), (1, 3), (3, 5), (7, 8)},
     1, {2, 4, 6, 7, 8}, {1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1, 8: 0},
     True),
    ({(0, 1), (4, 4), (4, 0), (1, 2), (3, 4), (0, 0), (0, 3), (2, 0), (2, 3), (0, 2)}, 0, {1}, {0: 0, 1: 0, 2: 1, 3: 1, 4: 0}, True),
    ({(0, 1), (4, 4), (4, 0), (1, 2), (3, 4), (0, 4), (0, 0), (2, 3), (0, 2), (1, 0)}, 0, {2, 3}, {0: 0, 1: 0, 2: 1, 3: 1, 4: 1}, False),
    ({(3, 4), (4, 9), (8, 9), (1, 0), (1, 6), (1, 3), (1, 9), (6, 2), (7, 1), (4, 5), (5, 6), (0, 1), (1, 2), (6, 7), (9, 0), (2, 3), (1, 7), (6, 6), (6, 9), (7, 8)}, 0, {6}, {0: 1, 1: 0, 2: 0, 3: 0, 4: 1, 5: 1, 6: 0, 7: 0, 8: 0, 9: 0}, True),
    ({(3, 4), (8, 0), (8, 9), (6, 5), (4, 5), (3, 9), (5, 6), (8, 5), (0, 1), (0, 7), (1, 2), (6, 4), (7, 9), (6, 7), (9, 0), (2, 0), (0, 6), (2, 3), (6, 6), (7, 8)}, 0, {4}, {0: 1, 1: 1, 2: 1, 3: 1, 4: 1, 5: 0, 6: 0, 7: 1, 8: 1, 9: 1}, False),
    ({(12, 4), (3, 4), (12, 13), (19, 0), (8, 9), (17, 18), (10, 15), (13, 14), (15, 11), (16, 19), (18, 19), (12, 3), (4, 5), (5, 6), (14, 15), (0, 1), (9, 10), (1, 2), (10, 11), (2, 10), (6, 7), (15, 16), (6, 13), (6, 19), (4, 10), (17, 1), (2, 3), (11, 12), (7, 8), (16, 17)}, 0, {0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18}, {0: 0, 1: 0, 2: 0, 3: 0, 4: 1, 5: 0, 6: 0, 7: 0, 8: 1, 9: 1, 10: 1, 11: 1, 12: 0, 13: 1, 14: 0, 15: 1, 16: 0, 17: 1, 18: 0, 19: 1}, True),
    ({(3, 4), (12, 13), (14, 10), (19, 0), (17, 3), (11, 2), (8, 9), (17, 18), (13, 5), (13, 14), (16, 13), (6, 14), (18, 19), (4, 5), (5, 6), (14, 15), (0, 1), (9, 10), (1, 2), (10, 11), (15, 13), (6, 7), (15, 16), (4, 4), (10, 4), (2, 3), (11, 12), (7, 8), (15, 18), (16, 17)}, 0, {1, 2, 3, 5, 8, 9, 10, 11, 14, 15, 18, 19}, {0: 0, 1: 0, 2: 0, 3: 1, 4: 1, 5: 1, 6: 1, 7: 1, 8: 0, 9: 1, 10: 0, 11: 0, 12: 0, 13: 1, 14: 0, 15: 0, 16: 0, 17: 0, 18: 1, 19: 0}, False)
]


if __name__ == '__main__':
    for (edges, start_node, e_nodes, omega, win) in INSTANCES:
        (found, strategy) = solve_parity_game(edges, start_node, e_nodes, omega)
        assert (found == 'found') == win
        assert (found == 'nonexistent') == (not win)
